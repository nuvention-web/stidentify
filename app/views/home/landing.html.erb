<div class="landing-panel1">
  <div class="row"></div>
  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-3"></div>
    <div class="col-md-2"></div>
    <div class="col-md-3">
      <button class="btn btn-primary btn-lg landing-learn-more">Learn More</button>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog initial-signup">
    <div class="modal-content">
      <div class="modal-body">
        <%= form_for @initial_user do |f| %>

          <div class="form-group">
            <%= f.text_field :name, placeholder: "name" %>
          </div>

          <div class="form-group">
            <%= f.label :category, "I am a:" %><br/>
            <%= f.radio_button :category, "coach" %> <%= f.label :category, "coach" %> 
            <%= f.radio_button :category, "debater" %> <%= f.label :category, "debater" %>
            <%= f.radio_button :category, "parent" %> <%= f.label :category, "parent" %>
          </div>

          <div class="form-group">
            <%= f.text_field :email, placeholder: "email address" %>
          </div>

          <div class="form-group">
            <%= f.submit "Sign up to learn more", :class => "btn btn-primary" %>
          </div>
        <% end %>

      </div>

    </div>
  </div>



<script>
	window.onload = function() {
		$("button:contains('Learn More')").on("click", function(e) {
			e.preventDefault();
			$("#myModal").modal('show');
		})

    $("form").on("submit", function(e) {
      e.preventDefault();
      $.ajax({
        url: "<%= initial_users_path %>",
        type: "POST",
        dataType: 'json',
        data: "initial_user[" + $(this).serialize(),
        context: this,
        success: clearModal()
      });
    })
	}

  function clearModal(){
    $(".modal-body").text("Thanks for signing up! We'll let you know when Debatable ready to go.")  
  }

  
</script>